---
import { getEntry } from 'astro:content';
import { getLangFromUrl, useTranslations } from '../i18n/utils';
import LanguagePicker from '../components/LanguagePicker.astro'

const general = await getEntry('settings','general');
const footer = await getEntry('settings','footer');

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<footer class="block relative bg-sauvignon-800/30 w-full text-center py-32">
  <div class="mx-auto px-8 md:max-w-7xl">
    <div class="flex justify-center mb-4">
      {t('footer.cta')}
    </div>
    <div class="flex justify-center gap-8 mb-8">
      {footer
        .data
        .socials
        .map(
          social =>
            <a href={social.link} 
            class="no-underline relative inline-block hover:underline" 
            title={social.name} 
            aria-label={social.name} 
            rel="noopener">
              <span set:html={social.name}></span>
            </a>
        )}
    </div>
    <LanguagePicker />
    <p class="m-0 opacity-60">
      <span>&copy; copyright&nbsp;</span>
      <span>{general.data.title}&nbsp;</span>
      <span set:html={new Date().getFullYear()}></span>
      <span>. all rights reserved</span>
    </p>
  </div>
</footer>
