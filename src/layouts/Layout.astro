---
import { ViewTransitions } from 'astro:transitions';
import { GoogleFontsOptimizer } from "astro-google-fonts-optimizer";
import { getLangFromUrl } from '../i18n/utils';
import Header from "../components/Header.astro"
import Footer from "../components/Footer.astro"

const { title } = Astro.props;

const lang = getLangFromUrl(Astro.url);
---

<!DOCTYPE html>
<html lang={lang} class="scroll-smooth">
  <head>
    <style>
      body {
        background-image: url("../assets/topography.svg");
      }
    </style>

    <!-- Google Tag Manager -->
    <script is:inline>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-N4M6MQDS');
    </script>
    <!-- End Google Tag Manager -->

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    
    <GoogleFontsOptimizer url="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Yeseva+One&display=swap" rel="stylesheet">
    </GoogleFontsOptimizer>

    <ViewTransitions />
  </head>

  
  <body class="font-sans tracking-tight text-base antialised flex flex-col min-h-screen bg-sirah-50 text-concord-700 font-normal scroll-smooth">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe 
        src="https://www.googletagmanager.com/ns.html?id=GTM-N4M6MQDS"
        height="0" 
        width="0" 
        style="display:none;visibility:hidden">
      </iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    <Header />
    <slot />
    <Footer />
  </body>
</html>

<style is:global>
  .card-image:after {
    content: "";
    display: block;
    padding-bottom: 83%;
  }
</style>
